<!-- Modal -->
<link rel="stylesheet" href="/css/chipsec_modules.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<div class="modal fade" id="contentModal" tabindex="-1" role="dialog" aria-labelledby="contentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="contentModalLabel">Content</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <pre>
                    <code class="language-shell" id="modal-content-box">
                    </code>
                </pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="mt-5">
    <h1>Scripts</h1>

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="thead-dark">
                        <tr>
                            <th>Script</th>
                            <th>Execution Time</th>
                            <th>Exit Code</th>
                            <th>Output</th>
                            <th>Script Contents</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% scripts.forEach(script => { %>
                            <tr>
                                <td><%= script.script %></td>
                                <td><%= script.execution_time %></td>
                                <td><%= script.exit_code %></td>
                                <td>
                                    <button type="button" class="btn btn-secondary" onclick="showContent('<%= script.output %>')">View Output</button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-secondary" onclick="showContent('<%= script.script_contents %>')">View Script</button>
                                </td>
                                <td><%= script.status %></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>